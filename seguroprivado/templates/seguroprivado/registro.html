<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="copyright" content="MACode ID, https://macodeid.com/">

  <title>{% block title %} Formulario de Registro {% endblock %}</title>
  
  {% load static %}
  
  <link rel="stylesheet" href="{% static 'assets/css/maicons.css' %}">

  <link rel="stylesheet" href="{% static 'assets/css/bootstrap.css' %}">

  <link rel="stylesheet" href="{% static 'assets/vendor/owl-carousel/css/owl.carousel.css' %}">

  <link rel="stylesheet" href="{% static 'assets/vendor/animate/animate.css' %}">

  <link rel="stylesheet" href="{% static 'assets/css/theme.css' %}">

  <link rel="stylesheet" href="{% static 'assets/css/registro.css' %}">

  <link rel="stylesheet" href="{% static 'assets/css/medicos.css' %}">

  {% comment %} Font Awesome icons (free version) {% endcomment %}
  <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" crossorigin="anonymous"></script>

  <!-- Mensaje de confirmación de JS con SweetAlert 2 -->
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="sweetalert2.min.js"></script>
  <link rel="stylesheet" href="sweetalert2.min.css">

  {% block eliminar_medico %}
  {# Mensaje de alerta para eliminar médico #}
  <script type="text/javascript" src="{% static 'assets/js/medico.js' %}"></script>
  {% endblock %}
  
  {% block eliminar_medicamento %}
  {# Mensaje de alerta para eliminar medicamento #}
  <script type="text/javascript" src="{% static 'assets/js/medicamento.js' %}"></script>
  {% endblock %}
</head>

<body>
  <div class="back-to-top"></div>
  <header>
    <nav class="navbar navbar-light navbar-expand-sm shadow-sm">
      <div class="container">
        <span class="navbar-brand text-primary">Proyecto <span class="text-dark">Django</span></span>
      </div>
    </nav>
  </header>

  <div class="page-hero bg-image overlay-dark row m-0 justify-content-center align-items-center" id="img_fondo">
    {% if request.user.is_authenticated and request.user.is_staff %}
      {# Para la tabla de pacientes #}
      {% block lista_pacientes %}{% endblock %}
      
      {# Para el CRUD de médicos #}
      {% block lista_medicos %}{% endblock %}
      {% block aniadir_medico %}{% endblock %}
      {% block editar_medico %}{% endblock %}
      
      {# Para el CRUD de medicamentos #}
      {% block lista_medicamentos %}{% endblock %}
      {% block aniadir_medicamento %}{% endblock %}
      {% block editar_medicamento %}{% endblock %}

      {# Para las citas de los médicos #}
      {% block lista_citas_medico %}{% endblock %}
      {% block cita_actual %}{% endblock %}
      {% block filtro_medico %}{% endblock %}

      {# Para ver el historial de los pacientes del médico logueado #}
      {% block historial_citas_medico %}{% endblock %}

    {% elif request.user.is_authenticated and not request.user.is_staff %}
      {# Bloques donde el paciente puede pedir sus citas #}
      {% block citas_paciente %}{% endblock %}
      {% block pedir_cita %}{% endblock %}

      {# Para ver el historial del paciente logueado #}
      {% block historial_paciente %}{% endblock %}

      {# Para simular el carrito de la compra del paciente #}
      {% block tienda_medicamentos %}{% endblock %}

    {% else %}
    <div class="rounded p-5 bg-light col-3 row m-0 justify-content-center align-items-center" id="formulario">
      <span class="navbar-brand text-primary mb-3">Registro de pacientes</span>

      <form action="{% url 'registro' %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        {% block form_paciente %}
        <span class="text-primary" style="margin-left: -10%;">Nombre</span>

        <div class="input-group input-navbar mb-2" id="paciente">
          <div class="input-group-prepend row">
            <span class="input-group-text" id="icon-addon1" style="margin-left: -1.78em;"><span class="fas fa-regular fa-id-badge"></span></span>
          </div>
          {{ form.nombre }}
        </div>
        {{ form.nombre.errors }}

        <span class="text-primary" style="margin-left: -10%;">Apellidos</span>
        
        <div class="input-group input-navbar mb-2" id="paciente">
          <div class="input-group-prepend row">
            <span class="input-group-text" id="icon-addon1" style="margin-left: -1.78em;"><span class="fas fa-regular fa-id-badge"></span></span>
          </div>
          {{ form.apellidos }}
        </div>
        {{ form.apellidos.errors }}

        <span class="text-primary" style="margin-left: -10%;">Edad</span>

        <div class="input-group input-navbar mb-2" id="paciente">
          <div class="input-group-prepend row">
            <span class="input-group-text" id="icon-addon1" style="margin-left: -1.78em;"><span class="fas fa-regular fa-user-clock"></span></span>
          </div>
          {{ form.edad }}
        </div>
        {{ form.edad.errors }}

        <span class="text-primary" style="margin-left: -10%;">Dirección</span>
        <div class="input-group input-navbar mb-2" id="paciente">
          <div class="input-group-prepend row">
            <span class="input-group-text" id="icon-addon1" style="margin-left: -1.78em;"><span class="fas fa-solid fa-house-user"></span></span>
          </div>
          {{ form.direccion }}
        </div>
        {{ form.direccion.errors }}

        <span class="text-primary" style="margin-left: -10%;">Foto</span>

        <div class="input-group input-navbar mb-2" id="paciente">
          <div class="input-group-prepend row">
            <span class="input-group-text" id="icon-addon1" style="margin-left: -1.78em;"><span class="fas fa-solid fa-image"></span></span>
          </div>
          {{ form.foto }}
        </div>
        {{ form.foto.errors }}
        
        <span class="text-primary" style="margin-left: -10%;">Nombre de usuario</span>

        <div class="input-group input-navbar mb-2" id="paciente">
          <div class="input-group-prepend row">
            <span class="input-group-text" id="icon-addon1" style="margin-left: -1.78em;"><span class="fas fa-user"></span></span>
          </div>
          {{ form.username }}
        </div>
        {{ form.username.errors }}

        <span class="text-primary" style="margin-left: -10%;">Contraseña</span>

        <div class="input-group input-navbar mb-4" id="paciente">
          <div class="input-group-prepend row">
            <span class="input-group-text" id="icon-addon1" style="margin-left: -1.78em;"><span class="fas fa-lock"></span></span>
          </div>
          {{ form.password }}
        </div>
        {{ form.password.errors }}
        {% endblock %}

        <a href="{% url 'login' %}" class="row btn btn-danger btn-block">
          <span class="fas fa-arrow-left"></span>
          <span>Cancelar</span>
        </a>
  
        <button class="row btn btn-primary btn-block" id="registrar">
          <span class="fas fa-user-plus"></span>
          <span class="navbar-toggler-icon">Registrar</span>
        </button>
      </form>
    </div>
    {% endif %}
    <span class="navbar-brand"></span>
  </div>

{# Código JS para el botón de búsqueda del historial del paciente #}
<script src="{% static 'assets/js/historial_paciente.js' %}"></script>

{# Códigos JS para el Bootstap de nuestra página #}
<script src="{% static 'assets/js/jquery-3.5.1.min.js' %}"></script>

<script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>

<script src="{% static 'assets/vendor/owl-carousel/js/owl.carousel.min.js' %}"></script>

<script src="{% static 'assets/vendor/wow/wow.min.js' %}"></script>

<script src="{% static 'assets/js/theme.js' %}"></script>

</body>
</html>